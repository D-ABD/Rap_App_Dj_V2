# Generated by Django 4.2.7 on 2025-10-16 17:40

from django.db import migrations, models
import django.db.models.deletion


class Migration(migrations.Migration):

    dependencies = [
        ('rap_app', '0031_alter_prospectioncomment_options'),
    ]

    operations = [
        migrations.CreateModel(
            name='CerfaContrat',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('pdf_fichier', models.FileField(blank=True, null=True, upload_to='cerfas/', verbose_name='Fichier PDF généré')),
                ('employeur_prive', models.BooleanField(default=True)),
                ('employeur_public', models.BooleanField(default=False)),
                ('employeur_nom', models.CharField(max_length=255)),
                ('employeur_adresse_numero', models.CharField(blank=True, max_length=20, null=True)),
                ('employeur_adresse_voie', models.CharField(blank=True, max_length=255, null=True)),
                ('employeur_adresse_complement', models.CharField(blank=True, max_length=255, null=True)),
                ('employeur_code_postal', models.CharField(blank=True, max_length=10, null=True)),
                ('employeur_commune', models.CharField(blank=True, max_length=255, null=True)),
                ('employeur_telephone', models.CharField(blank=True, max_length=50, null=True)),
                ('employeur_email', models.EmailField(blank=True, max_length=254, null=True)),
                ('employeur_siret', models.CharField(blank=True, max_length=20, null=True)),
                ('employeur_type', models.CharField(blank=True, max_length=100, null=True)),
                ('employeur_specifique', models.CharField(blank=True, max_length=100, null=True)),
                ('employeur_code_ape', models.CharField(blank=True, max_length=10, null=True)),
                ('employeur_effectif', models.PositiveIntegerField(blank=True, null=True)),
                ('employeur_code_idcc', models.CharField(blank=True, max_length=20, null=True)),
                ('employeur_regime_assurance_chomage', models.BooleanField(default=False)),
                ('maitre1_nom', models.CharField(blank=True, max_length=255, null=True)),
                ('maitre1_prenom', models.CharField(blank=True, max_length=255, null=True)),
                ('maitre1_date_naissance', models.DateField(blank=True, null=True)),
                ('maitre1_email', models.EmailField(blank=True, max_length=254, null=True)),
                ('maitre1_emploi', models.CharField(blank=True, max_length=255, null=True)),
                ('maitre1_diplome', models.CharField(blank=True, max_length=255, null=True)),
                ('maitre1_niveau_diplome', models.CharField(blank=True, max_length=255, null=True)),
                ('maitre2_nom', models.CharField(blank=True, max_length=255, null=True)),
                ('maitre2_prenom', models.CharField(blank=True, max_length=255, null=True)),
                ('maitre2_date_naissance', models.DateField(blank=True, null=True)),
                ('maitre2_email', models.EmailField(blank=True, max_length=254, null=True)),
                ('maitre2_emploi', models.CharField(blank=True, max_length=255, null=True)),
                ('maitre2_diplome', models.CharField(blank=True, max_length=255, null=True)),
                ('maitre2_niveau_diplome', models.CharField(blank=True, max_length=255, null=True)),
                ('maitre_eligible', models.BooleanField(default=True)),
                ('apprenti_nom_naissance', models.CharField(max_length=255)),
                ('apprenti_nom_usage', models.CharField(blank=True, max_length=255, null=True)),
                ('apprenti_prenom', models.CharField(max_length=255)),
                ('apprenti_nir', models.CharField(blank=True, max_length=15, null=True)),
                ('apprenti_numero', models.CharField(blank=True, max_length=20, null=True)),
                ('apprenti_voie', models.CharField(blank=True, max_length=255, null=True)),
                ('apprenti_complement', models.CharField(blank=True, max_length=255, null=True)),
                ('apprenti_code_postal', models.CharField(blank=True, max_length=10, null=True)),
                ('apprenti_commune', models.CharField(blank=True, max_length=255, null=True)),
                ('apprenti_telephone', models.CharField(blank=True, max_length=50, null=True)),
                ('apprenti_email', models.EmailField(blank=True, max_length=254, null=True)),
                ('representant_nom', models.CharField(blank=True, max_length=255, null=True)),
                ('representant_lien', models.CharField(blank=True, help_text='Lien de parenté (père, mère, tuteur...)', max_length=100, null=True)),
                ('representant_adresse_numero', models.CharField(blank=True, max_length=20, null=True)),
                ('representant_adresse_voie', models.CharField(blank=True, max_length=255, null=True)),
                ('representant_adresse_complement', models.CharField(blank=True, max_length=255, null=True)),
                ('representant_code_postal', models.CharField(blank=True, max_length=10, null=True)),
                ('representant_commune', models.CharField(blank=True, max_length=255, null=True)),
                ('representant_email', models.EmailField(blank=True, max_length=254, null=True)),
                ('apprenti_date_naissance', models.DateField(blank=True, null=True)),
                ('apprenti_sexe', models.CharField(blank=True, choices=[('M', 'Masculin'), ('F', 'Féminin')], max_length=1, null=True)),
                ('apprenti_departement_naissance', models.CharField(blank=True, max_length=50, null=True)),
                ('apprenti_commune_naissance', models.CharField(blank=True, max_length=255, null=True)),
                ('apprenti_nationalite', models.CharField(blank=True, max_length=100, null=True)),
                ('apprenti_regime_social', models.CharField(blank=True, max_length=100, null=True)),
                ('apprenti_sportif_haut_niveau', models.BooleanField(default=False)),
                ('apprenti_rqth', models.BooleanField(default=False)),
                ('apprenti_droits_rqth', models.BooleanField(default=False)),
                ('apprenti_equivalence_jeunes', models.BooleanField(default=False)),
                ('apprenti_extension_boe', models.BooleanField(default=False)),
                ('apprenti_situation_avant', models.CharField(blank=True, max_length=255, null=True)),
                ('apprenti_dernier_diplome_prepare', models.CharField(blank=True, max_length=255, null=True)),
                ('apprenti_derniere_annee_suivie', models.CharField(blank=True, max_length=100, null=True)),
                ('apprenti_intitule_dernier_diplome', models.CharField(blank=True, max_length=255, null=True)),
                ('apprenti_plus_haut_diplome', models.CharField(blank=True, max_length=255, null=True)),
                ('apprenti_projet_entreprise', models.BooleanField(default=False)),
                ('cfa_entreprise', models.BooleanField(default=False)),
                ('cfa_denomination', models.CharField(blank=True, max_length=255, null=True)),
                ('cfa_uai', models.CharField(blank=True, max_length=50, null=True)),
                ('cfa_siret', models.CharField(blank=True, max_length=20, null=True)),
                ('cfa_numero', models.CharField(blank=True, max_length=20, null=True)),
                ('cfa_voie', models.CharField(blank=True, max_length=255, null=True)),
                ('cfa_complement', models.CharField(blank=True, max_length=255, null=True)),
                ('cfa_code_postal', models.CharField(blank=True, max_length=10, null=True)),
                ('cfa_commune', models.CharField(blank=True, max_length=255, null=True)),
                ('cfa_lieu_principal', models.BooleanField(default=True)),
                ('diplome_vise', models.CharField(blank=True, max_length=255, null=True)),
                ('diplome_intitule', models.CharField(blank=True, max_length=255, null=True)),
                ('code_diplome', models.CharField(blank=True, max_length=50, null=True)),
                ('code_rncp', models.CharField(blank=True, max_length=50, null=True)),
                ('formation_debut', models.DateField(blank=True, null=True)),
                ('formation_fin', models.DateField(blank=True, null=True)),
                ('formation_duree_heures', models.PositiveIntegerField(blank=True, null=True)),
                ('formation_distance_heures', models.PositiveIntegerField(blank=True, null=True)),
                ('formation_lieu_denomination', models.CharField(blank=True, max_length=255, null=True)),
                ('formation_lieu_uai', models.CharField(blank=True, max_length=50, null=True)),
                ('formation_lieu_siret', models.CharField(blank=True, max_length=20, null=True)),
                ('formation_lieu_numero', models.CharField(blank=True, max_length=20, null=True)),
                ('formation_lieu_voie', models.CharField(blank=True, max_length=255, null=True)),
                ('formation_lieu_complement', models.CharField(blank=True, max_length=255, null=True)),
                ('formation_lieu_code_postal', models.CharField(blank=True, max_length=10, null=True)),
                ('formation_lieu_commune', models.CharField(blank=True, max_length=255, null=True)),
                ('type_contrat', models.CharField(blank=True, max_length=255, null=True)),
                ('type_derogation', models.CharField(blank=True, max_length=255, null=True)),
                ('motif_derogation', models.CharField(blank=True, max_length=255, null=True)),
                ('numero_contrat_precedent', models.CharField(blank=True, max_length=100, null=True)),
                ('date_conclusion', models.DateField(blank=True, null=True)),
                ('date_debut_execution', models.DateField(blank=True, null=True)),
                ('date_debut_formation', models.DateField(blank=True, null=True)),
                ('date_fin_contrat', models.DateField(blank=True, null=True)),
                ('date_effet_avenant', models.DateField(blank=True, null=True)),
                ('duree_hebdo_heures', models.PositiveIntegerField(blank=True, null=True)),
                ('duree_hebdo_minutes', models.PositiveIntegerField(blank=True, null=True)),
                ('duree_totale_contrat_mois', models.PositiveIntegerField(blank=True, null=True)),
                ('travail_dangereux', models.BooleanField(default=False)),
                ('age_apprenti', models.PositiveSmallIntegerField(blank=True, null=True)),
                ('ref_salaire', models.CharField(blank=True, max_length=10, null=True)),
                ('salaire_brut_mensuel', models.DecimalField(blank=True, decimal_places=2, max_digits=8, null=True)),
                ('caisse_retraite', models.CharField(blank=True, max_length=255, null=True)),
                ('avantage_nourriture', models.DecimalField(blank=True, decimal_places=2, max_digits=7, null=True)),
                ('avantage_logement', models.DecimalField(blank=True, decimal_places=2, max_digits=7, null=True)),
                ('avantage_autre', models.CharField(blank=True, max_length=255, null=True)),
                ('avantages_en_nature_total', models.DecimalField(blank=True, decimal_places=2, max_digits=8, null=True)),
                ('attestation_pieces_justificatives', models.BooleanField(default=False)),
                ('lieu_signature', models.CharField(blank=True, max_length=255, null=True)),
                ('date_signature_apprenti', models.DateField(blank=True, null=True)),
                ('date_signature_employeur', models.DateField(blank=True, null=True)),
                ('signature_apprenti', models.BooleanField(default=False)),
                ('signature_employeur', models.BooleanField(default=False)),
                ('signature_representant_legal', models.BooleanField(default=False)),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('candidat', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='cerfa_contrats', to='rap_app.candidat')),
                ('employeur', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, to='rap_app.partenaire')),
                ('formation', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, to='rap_app.formation')),
            ],
            options={
                'verbose_name': 'CERFA Contrat d’apprentissage',
                'verbose_name_plural': 'CERFA Contrats d’apprentissage',
                'ordering': ['-created_at'],
            },
        ),
        migrations.CreateModel(
            name='CerfaRemuneration',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('annee', models.PositiveSmallIntegerField(choices=[(1, '1ère année'), (2, '2e année'), (3, '3e année'), (4, '4e année')])),
                ('date_debut', models.DateField(blank=True, null=True)),
                ('date_fin', models.DateField(blank=True, null=True)),
                ('pourcentage', models.DecimalField(blank=True, decimal_places=2, max_digits=5, null=True)),
                ('reference', models.CharField(choices=[('SMIC', 'SMIC'), ('SMC', 'SMC')], default='SMIC', max_length=10)),
                ('montant_mensuel_estime', models.DecimalField(blank=True, decimal_places=2, help_text='Optionnel : pré-calcul du salaire', max_digits=8, null=True)),
                ('contrat', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='remunerations', to='rap_app.cerfacontrat')),
            ],
            options={
                'verbose_name': 'Rémunération CERFA',
                'verbose_name_plural': 'Rémunérations CERFA',
                'ordering': ['contrat', 'annee', 'date_debut'],
            },
        ),
    ]
